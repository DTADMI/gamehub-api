server:
  port: ${PORT:8080}
  address: 0.0.0.0
  compression:
    enabled: true
    min-response-size: 1024
    mime-types: application/json,application/xml,text/html,text/xml,text/plain,text/css,application/javascript,text/javascript

spring:
  datasource:
    driver-class-name: org.postgresql.Driver
    # Use local Postgres (Docker) for dev. Values are overridable by env vars.
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/gamesdb}
    username: ${SPRING_DATASOURCE_USERNAME:postgres}
    password: ${SPRING_DATASOURCE_PASSWORD:postgres}
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: false
    properties:
      hibernate:
        format_sql: false
  # Using Postgres as dev DB
  docker:
    compose:
      enabled: true
      file: docker-compose.yml
      lifecycle-management: start-and-stop
  # OAuth2 Client Configuration
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID:your-google-client-id}
            client-secret: ${GOOGLE_CLIENT_SECRET:your-google-client-secret}
            scope:
              - email
              - profile
          github:
            client-id: ${GITHUB_CLIENT_ID:your-github-client-id}
            client-secret: ${GITHUB_CLIENT_SECRET:your-github-client-secret}
            scope:
              - user:email
              - read:user
          facebook:
            client-id: ${FACEBOOK_CLIENT_ID:your-facebook-client-id}
            client-secret: ${FACEBOOK_CLIENT_SECRET:your-facebook-client-secret}
            scope:
              - email
              - public_profile
  mvc:
    log-request-details: false

## HTTP compression configured above under `server.compression`

# OAuth2 Redirect URI for development and admin seeding
app:
  oauth2:
    allowedRedirectUris: http://localhost:3000/oauth2/redirect,http://localhost:8080/oauth2/redirect
  admin:
    # RBAC admin seeding (comma-separated emails); override via env APP_ADMIN_EMAILS or property app.admin.emails
    emails: ${APP_ADMIN_EMAILS:}
  swagger:
    open: true
  ratelimit:
    # Per-minute limits; can be overridden via envs USER_RPM and GUEST_RPM
    userRpm: ${USER_RPM:300}
    guestRpm: ${GUEST_RPM:60}

# Disable any Cloud SQL specific configuration in dev profile (if present)
cloud:
  gcp:
    sql:
      enabled: false

logging:
  level:
    root: INFO
    org.springframework: WARN
    com.games: DEBUG
    org.springframework.security: DEBUG
